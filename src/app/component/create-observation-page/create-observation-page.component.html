<br>

<!-- container -->

<div class="container">
  <h1> Création d'une observation:</h1><br>
  <form (ngSubmit)="save()" [formGroup]="observationForm">
    <div *ngIf="erreur" class="alert alert-danger">Données incorrectes</div>
    <h2> Renseignez l'animal:</h2><br>


    <br>
    <div class="form-group">
      <label> Nom de l'animal (parmis ceux de la base de données): </label>
      <select [(ngModel)]="animal" formControlName="animalNomCourant" class="form-control">
        <option *ngFor="let a of animaux" > {{a.nomCourant}}   </option>
      </select>
    </div>
    <br>

    <!--   <div>AJOUT IMAGE OBSERVATION</div>
       <div class="form-group">
        <label>Photo:</label>
        <input type="file" accept="emplacementImage/jpeg, emplacementImage/png" [(ngModel)]="observation.animal.emplacementImage" class="form-control"
               formControlName="animalEmplacementImage">
        <div *ngIf="emplacementImageCtrl.dirty&&emplacementImageCtrl.hasError('required')" class="alert alert-danger">
           Photo requise
         </div>
       </div>
       <div class="form-group">
         <label>Description:</label>
         <textarea rows="10" cols="50" name="description" [(ngModel)]="observation.animal.description" class="form-control"
                   formControlName="description">Description...</textarea>
       </div> -->
    <h3> L'import de l'image n'est disponible que dans l'édition de l'observation</h3>
<!--    <div class="form-group">
      <label>Photo:</label>
      <input type="file" (change)="onFileChanged($event)">
      <img [src]="imgURL" height="100" *ngIf="imgURL"><br>
      <input type="button" (click)="onUpload()" value="upload">
    </div> -->
    <br>
    <h2> Renseignez le lieu d'observation:</h2><br>

    <div class="form-group">
      <label>Pays:</label>
      <input [(ngModel)]="lieu.pays" class="form-control" formControlName="localisationPays">
      <!--   <div *ngIf="observation.localisation.paysCtrl.dirty&&paysCtrl.hasError('required')" class="alert alert-danger">
           Pays requis
         </div>-->
    </div>
    <div class="form-group">
      <label>Region:</label>
      <input [(ngModel)]="lieu.region" class="form-control" formControlName="localisationRegion">
      <!--   <div *ngIf="regionCtrl.dirty&&regionCtrl.hasError('required')" class="alert alert-danger">
           Region requise
         </div> -->
    </div>
    <div class="form-group">
      <label>Localite:</label>
      <input [(ngModel)]="lieu.localite" class="form-control" formControlName="localisationLocalite">
      <!--   <div *ngIf="localiteCtrl.dirty&&localiteCtrl.hasError('required')" class="alert alert-danger">
            Localite requise
      </div>-->
    </div>
    <br>
    <!-- FIN USER, ON RENSEIGNE OBSERVATION -->
    <h2> Renseignez le contexte de l'observation:</h2><br>


    <!--    <div class="form-group">
          <label>id:</label>
          <input [(ngModel)]="observation.id" readonly placeholder="Attribution automatique"
                 [ngModelOptions]="{standalone: true}" class="form-control">
        </div>  -->
    <div class="form-group">
      <label>Date d'observation:</label>
      <input [(ngModel)]="observation.dateObservation" class="form-control" type="date"
             formControlName="dateObservation">
      <div *ngIf="dateObservationCtrl.dirty&&dateObservationCtrl.hasError('dateInvalid')"
           class="alert alert-danger">
        Vous êtes dans le futur
      </div>
    </div>
    <div class="form-group">
      <label>Combien d'animaux de cette espèce avez vous observé ?</label>
      <input [(ngModel)]="observation.nombreObservations" class="form-control" formControlName="nombreObservation">
      <div *ngIf="nombreObservationCtrl.dirty&&nombreObservationCtrl.hasError('required')" class="alert alert-danger">
        Nombre requis
      </div>
    </div>
    <div class="form-group">
      <label>Description:</label>
      <textarea rows="10" cols="50" name="description" [(ngModel)]="observation.description" class="form-control"
                formControlName="description">Description...</textarea>
      <div *ngIf="descriptionCtrl.dirty&&descriptionCtrl.hasError('required')" class="alert alert-danger">
        Description requise
      </div>
    </div>


    <div>
      <button type="submit" class="btn btn-info"
              [disabled]="disable()">enregistrer
      </button>
      <a [routerLink]="['/observation']" routerLinkActive="active" class="btn btn-outline-warning">annuler</a>
    </div>
  </form>


</div>
