<br>

<!-- container -->

<div class="container">
  <h2> Ajout d'une observation:</h2><br>
  <form (ngSubmit)="save()" [formGroup]="observationForm">
    <div *ngIf="erreur" class="alert alert-danger">Données incorrectes</div>

    <!-- ON RENSEIGNE L ANIMAL CONCERNE -->
    <h1> Renseignez l'animal:</h1><br>

    <div class="form-group">
      <label>Ordre:</label>
      <input [(ngModel)]="observation.animal.ordre" class="form-control" formControlName="animalOrdre">
      <!-- <div *ngIf="ordreCtrl.dirty&&ordreCtrl.hasError('required')" class="alert alert-danger">
        Ordre requis
      </div> -->

    </div>

    <div class="form-group">
      <label>Nom courant:</label>
      <input [(ngModel)]="observation.animal.nomCourant" class="form-control" formControlName="animalNomCourant">
      <!-- <div *ngIf="animal.nomCourantCtrl.dirty&&nomCourantCtrl.hasError('required')" class="alert alert-danger">
        Nom animal requis
      </div> -->

    </div>
    <div class="form-group">
      <label>Nom latin:</label>
      <input [(ngModel)]="observation.animal.nomScientifique" class="form-control" formControlName="animalNomScientifique">

    </div>
    <div class="form-group">
      <label>Photo:</label>
      <input type="file" accept="emplacementImage/jpeg, emplacementImage/png" [(ngModel)]="observation.animal.emplacementImage" class="form-control"
             formControlName="animalEmplacementImage">
      <!-- <div *ngIf="emplacementImageCtrl.dirty&&emplacementImageCtrl.hasError('required')" class="alert alert-danger">
         Photo requise
       </div>-->
    </div>
    <div class="form-group">
      <label>Description:</label>
      <textarea rows="10" cols="50" name="description" [(ngModel)]="observation.animal.description" class="form-control"
                formControlName="description">Description...</textarea>
    </div>


    <!-- FIN ANIMAL, ON RENSEIGNE LIEU -->
    <h1> Renseignez le lieu d'observation:</h1><br>

    <div class="form-group">
      <label>Pays:</label>
      <input [(ngModel)]="observation.localisation.pays" class="form-control" formControlName="localisationPays">
      <!--   <div *ngIf="localisation.paysCtrl.dirty&&paysCtrl.hasError('required')" class="alert alert-danger">
          Pays requis
        </div>-->
      </div>
      <div class="form-group">
        <label>Region:</label>
        <input [(ngModel)]="observation.localisation.region" class="form-control" formControlName="localisationRegion">
        <!--   <div *ngIf="regionCtrl.dirty&&regionCtrl.hasError('required')" class="alert alert-danger">
            Region requise
          </div>-->
        </div>
        <div class="form-group">
          <label>Localite:</label>
          <input [(ngModel)]="observation.localisation.localite" class="form-control" formControlName="localisationLocalite">
         <!-- <div *ngIf="localiteCtrl.dirty&&localiteCtrl.hasError('required')" class="alert alert-danger">
            Localite requise
      </div> -->
    </div>


    <!-- FIN LIEU, ON RENSEIGNE USER -->
    <h1> Renseignez le user, ptet a faire automatiquement depuis le login:</h1><br>


    <!-- FIN USER, ON RENSEIGNE OBSERVATION -->
    <h1> Renseignez le contexte de l'observation:</h1><br>


    <div class="form-group">
      <label>id:</label>
      <input [(ngModel)]="observation.id" readonly placeholder="Attribution automatique"
             [ngModelOptions]="{standalone: true}" class="form-control">
    </div>
    <div class="form-group">
      <label>Date d'observation:</label>
      <input [(ngModel)]="observation.dateObservation" class="form-control" type="date"
             formControlName="dateObservation">
      <div *ngIf="dateObservationCtrl.dirty&&dateObservationCtrl.hasError('dateInvalid')"
           class="alert alert-danger">
        Vous êtes dans le futur
      </div>
    </div>
    <div class="form-group">
      <label>Nombre d'observations:</label>
      <input [(ngModel)]="observation.nombreObservations" class="form-control" formControlName="nombreObservation">
      <div *ngIf="nombreObservationCtrl.dirty&&nombreObservationCtrl.hasError('required')" class="alert alert-danger">
        Nombre requis
      </div>
    </div>
    <div class="form-group">
      <label>Description:</label>
      <textarea rows="10" cols="50" name="description" [(ngModel)]="observation.description" class="form-control"
                formControlName="description">Description...</textarea>
      <div *ngIf="descriptionCtrl.dirty&&descriptionCtrl.hasError('required')" class="alert alert-danger">
        Description requise
      </div>
    </div>


    <div>
      <button type="submit" class="btn btn-info"
              [disabled]="disable()">enregistrer
      </button>
      <a [routerLink]="['/observation']" routerLinkActive="active" class="btn btn-outline-warning">annuler</a>
    </div>
  </form>


</div>
